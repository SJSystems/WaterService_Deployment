<div ng-app="mainApp" ng-controller="buscarPlanificacionesRepartoController">

    <h4>Planificaciones de repartos</h4>

    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-4 no-padding-right">Fecha</label>
                <div class="col-xs-12 col-sm-8">
                    <div class="clearfix">

                        <div class="input-group">
                            <input ng-model="fechaPlanificacion" 
                                   class="validate form-control date-picker col-xs-10 col-sm-5 "                                    
                                   placeholder="dd/mm/yyyy" type="text">
                            <span class="input-group-addon">
                                <i class="fa fa-calendar bigger-110"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-sm-6">
            <div class="form-group">
                <label class="control-label col-xs-12 col-sm-4 no-padding-right">Reparto</label>
                <div class="col-xs-12 col-sm-8">
                    <div class="clearfix">
                        <select ng-model="repartoSeleccionado"
                                ng-options="reparto.nombreReparto for reparto in repartosDisponibles"
                                class="input-group col-xs-10 col-sm-8"></select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form-actions center">

        <button type="button" ng-click="buscarPlanificaciones()" class="btn btn-sm btn-primary">
            <i class="ace-icon fa fa-search icon-on-right bigger-110"></i>
            Buscar planificaciones
        </button>

        <button type="button" ng-click="abrirSeleccionarClientes()" class="btn btn-sm btn-success">
            <i class="ace-icon fa fa-plus icon-on-right bigger-110"></i>
            Agragar clientes a planificación
        </button>

    </div>

    <div class="row">
        <div class="col-xs-12">
            <div>
                <table class=" table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Nombre / Razón Social</th>
                            <th>Domicilio</th>
                            <th>Reparto</th>
                            <th>Fecha</th>
                            <th>Motivo</th>
                            <th>Usuario</th>
                            <th>HdR</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in planificaciones">
                            <td>{{item.nombreCliente}} ({{item.cliente_id}})</td>
                            <td>{{item.domicilioCompleto}}</td>
                            <td>{{item.nombreReparto}}</td>
                            <td>{{item.fechaReparto.slice(6, -2)  |  date:'dd/MM/yyyy'}}</td>
                            <td>{{item.motivoPlanificacion}}</td>
                            <td>{{item.usuarioPlanifica}}</td>
                            <td><a href="/HojasDeRuta?hojaDeRutaId={{item.hojaDeRuta_id}}">{{item.hojaDeRuta_id}}</a> </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>
<script src="~/js/app/mainApp.js"></script>
<script src="~/js/app/controllers/planificarRepartosControllers.js"></script>
<script src="~/js/app/app_directives.js"></script>