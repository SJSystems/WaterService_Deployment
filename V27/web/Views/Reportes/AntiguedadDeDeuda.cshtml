<div ng-app="mainApp" ng-controller="repAntiguedadDeDeudaController">

    <div class="widget-box widget-color-dark ui-sortable-handle" style="opacity: 1; z-index: 0;">
        <div class="widget-header widget-header-small">
            <h2 class="widget-title smaller">
                Antigüedad de deuda
            </h2>
        </div>
        <div class="widget-body">
            <div class="widget-main">

                <div class="row">

                    <div class="col-sm-6">

                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right center">Estados</label>
                            <div class="col-sm-9">
                                <div class="clearfix">
                                    <ui-seleccionar-valores-tabla-satelite dir-model="busqueda.estados" multiple="true" tabla-satelite-id="30" allow-clear="true"></ui-seleccionar-valores-tabla-satelite>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-sm-6">

                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right center">Tipos</label>
                            <div class="col-sm-9">
                                <div class="clearfix">
                                    <ui-seleccionar-valores-tabla-satelite dir-model="busqueda.tipos" multiple="true" tabla-satelite-id="20" allow-clear="true"></ui-seleccionar-valores-tabla-satelite>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                
                <div class="row" style="margin-top:10px">

                    <div class="col-sm-6">

                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right center">Repartos</label>
                            <div class="col-sm-9">
                                <div class="clearfix">
                                    <ui-seleccionar-repartos dir-model="busqueda.repartos" multiple="true" allow-clear="true"></ui-seleccionar-repartos>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-sm-6">

                        <div class="form-group">
                            <label class="col-sm-3 control-label no-padding-right center">Días</label>
                            <div class="col-sm-9">
                                <div class="clearfix">
                                    <ui-seleccionar-dias dir-model="busqueda.dias" multiple="true" allow-clear="true"></ui-seleccionar-dias>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
        <div class="widget-toolbox padding-8 clearfix">

            <button type="button" ng-disabled="descangando" ng-click="descargarExcel()" class="btn btn-sm btn-success pull-right" style="margin-left: 10px">
                <i class="ace-icon fa fa-file-excel-o icon-on-right bigger-110"></i>
                {{descangando?'Descargando archivo...':'Descargar Excel'}}
            </button>
            <button type="button" ng-click="buscar()" class="btn btn-sm btn-primary pull-right" style="margin-left: 10px">
                <i class="ace-icon fa fa-search icon-on-right bigger-110"></i>
                Buscar
            </button>

        </div>
    </div>

    <table class="table table-striped table-bordered table-hover"
           st-table="displayItems"
           st-safe-src="datos.items">
        <thead>
            <tr>
                <th colspan="18">
                    <input st-search="" class="form-control" placeholder="Buscar en esta tabla" type="text" />
                </th>
            </tr>
            <tr>
                <th colspan="4"></th>
                
                <th class="text-center" colspan="2">
                    Saldo total
                </th>

                <th class="text-center" colspan="2">
                    Sin vencer
                </th>

                <th class="text-center" colspan="2">
                    30 días
                </th>

                <th class="text-center" colspan="2">
                    60 días
                </th>

                <th class="text-center" colspan="2">
                    90 días
                </th>

                <th class="text-center" colspan="2">
                    120 días
                </th>

                <th class="text-center" colspan="2">
                    Antigua
                </th>

            </tr>
            <tr>
                <th st-sort="cliente">
                    Cliente
                </th>
                <th st-sort="tipo">
                    Tipo
                </th>
                <th st-sort="estado">
                    Estado
                </th>
                <th st-sort="reparto">
                    Reparto
                </th>

                <th class="text-center" st-sort="saldoFacturas">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldoFacturas">
                    Cant
                </th>

                <th class="text-center" st-sort="saldoNoVencido">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldoNoVencido">
                    Cant
                </th>
                
                <th class="text-center" st-sort="saldo30Dias">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldo30Dias">
                    Cant
                </th>
                
                <th class="text-center" st-sort="saldo60Dias">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldo60Dias">
                    Cant
                </th>

                <th class="text-center" st-sort="saldo90Dias">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldo90Dias">
                    Cant
                </th>

                <th class="text-center" st-sort="saldo120Dias">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldo120Dias">
                    Cant
                </th>
                
                <th class="text-center" st-sort="saldoAntiguo">
                    Saldo
                </th>
                <th class="center" st-sort="cantSaldoAntiguo">
                    Cant
                </th>
            </tr>

        </thead>
        <tbody>
            <tr ng-repeat="item in displayItems">
                <td>
                    {{item.cliente}}
                    <pop-over-cliente cliente-id="item.cliente_id"></pop-over-cliente>
                </td>
                <td>
                    {{item.tipo}}
                </td>
                <td>
                    {{item.estado}}
                </td>
                <td>
                    {{item.reparto}}
                </td>

                <td>
                    ${{item.saldoFacturas}}
                </td>
                <td>
                    {{item.cantSaldoFacturas}}
                </td>

                <td>
                    ${{item.saldoNoVencido}}
                </td>
                <td>
                    {{item.cantSaldoNoVencido}}
                </td>

                <td>
                    ${{item.saldo30Dias}}
                </td>
                <td>
                    {{item.cantSaldo30Dias}}
                </td>

                <td>
                    ${{item.saldo60Dias}}
                </td>
                <td>
                    {{item.cantSaldo60Dias}}
                </td>

                <td>
                    ${{item.saldo90Dias}}
                </td>
                <td>
                    {{item.cantSaldo90Dias}}
                </td>
                
                <td>
                    ${{item.saldo120Dias}}
                </td>
                <td>
                    {{item.cantSaldo120Dias}}
                </td>

                <td>
                    ${{item.saldoAntiguo}}
                </td>
                <td>
                    {{item.cantSaldoAntiguo}}
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4" class="center">
                    <strong class="pull-right">TOTAL</strong>
                </td>

                <td colspan="2" class="center">
                    ${{datos.saldoFacturas}}
                </td>
                
                <td colspan="2" class="center">
                    ${{datos.saldoNoVencido}}
                </td>
                <td colspan="2" class="center">
                    ${{datos.saldo30Dias}}
                </td>
                
                <td colspan="2" class="center">
                    ${{datos.saldo60Dias}}
                </td>
                
                <td colspan="2" class="center">
                    ${{datos.saldo90Dias}}
                </td>
                
                <td colspan="2" class="center">
                    ${{datos.saldo120Dias}}
                </td>
                
                <td colspan="2" class="center">
                    ${{datos.saldoAntiguo}}
                </td>
               
            </tr>
        </tfoot>
        <tfoot>
            <tr>
                <td colspan="18" class="text-center">
                    <div st-pagination="" st-items-by-page="30" st-displayed-pages="20"></div>
                </td>
            </tr>
        </tfoot>
    </table>


</div>

<script src="~/js/app/controllers/reportes/appReportes.js"></script>
<script src="~/js/app/controllers/reportes/directivesReportes.js"></script>
<script src="~/js/app/controllers/reportes/repAntiguedadDeDeuda.js"></script>
<script src="~/js/app/controllers/usuariosClientesControllers.js"></script>
<script src="~/js/app/app_directives.js"></script>
<style>
    .btn-default, .btn-default:focus, .btn:focus {
        background-color: #5aa9d9 !important;
        border-color: #031d2d;
    }
</style>